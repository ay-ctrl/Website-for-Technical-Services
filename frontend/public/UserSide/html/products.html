<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telefon Tamiri</title>
    <meta name="description"
        content="Yerinde ve garantili cep telefonu tamiri hizmeti! Uygun fiyatlarla ekran, batarya değişimi ve teknik servis çözümleri. Hızlı ve güvenilir tamir için hemen ulaşın.">
    <link rel="canonical" href="https://telefon-tamiri-seng209-211.com.tr/">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <meta property="og:title" content="Uygun Fiyatlarla Akıllı Cihaz Tamir Hizmeti Sizlerle">
    <meta property="og:description" content=" Hızlı ve güvenilir tamir için hemen ulaşın.">
    <meta property="og:url" content="https://telefon-tamiri-seng209-211.com.tr/">
    <link rel="stylesheet" href="../css/products.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" />
    <!-- URL LİNKİNİ DAHA GÜZEL BİR ŞEY YAP PLS-->
</head>

<body class="main page-loading animation">
    <!-- Header -->
    <header>
        <!-- Logo -->
        <div class="logo">
            <a href="dashboard.html">
                <img src="/public/images/ayda-logo.png" alt="Telefon Tamiri"
                    width="150">
            </a>
        </div>

        <!-- Navigation -->
        <nav>
            <ul>
                <li><a href="myRequests.html">Taleplerim</a></li>
                <li><a href="products.html">Aksesuar ve Ek Ürünler</a></li>
                <li><a href="hakkımızda.html">Hakkımızda</a></li>
                <li><a href="SSS.html">SSS</a></li>
                <li class="dropdown">
                    <button class="dropdown-button">Admin Kullanıcısı</button>
                    <div class="dropdown-content">
                        <a href="#">Ödemeler</a>
                        <a href="#">Çalışanlar</a>
                        <a href="changePassword.html">Şifre değiştir</a>
                        <a href="../../../index.html">Çıkış Yap</a>
                    </div>
                </li>
            </ul>
        
        </nav>

    </header>

    <div class="hakkimizda-container">
        <h2 class="title">AKSESUAR VE EK ÜRÜNLER</h2>
    </div>


    <div class="filters">
        <div class="categories">
            <label for="category-select">Kategoriler:</label>
            <select id="category-select">
                <option value="all">Tüm Ürünler</option>
                <option value="cases">Telefon Kılıfları</option>
                <option value="chargers">Şarj Cihazları</option>
                <option value="headphones">Kulaklıklar</option>
                <option value="car-accessories">Araç Aksesuarları</option>
                <option value="others">Diğer Ürünler</option>
            </select>
        </div>
        <div class="sorting">
            <label for="sort-select">Sırala:</label>
            <select id="sort-select">
                <option value="desc">En Pahalıdan En Ucuza</option>
                <option value="asc">En Ucuzdan En Pahalıya</option>
            </select>
        </div>
    </div>


    <div class="products" id="product-list">
        <div class="product-card">
            <img src="https://coflex.com.tr/wp-content/uploads/2021/01/resim-yok.jpg"
                alt="Ürün 1">
            <div class="product-info">
                <h3>Ürün Adı: XXXX</h3>
                <p class="price">Fiyat: XXXX TL</p>
                <p>Ürün Açıklaması</p>
                <button class="ekle-btn">ÜRÜNÜ SİL</button>
            </div>
        </div>
        <div class="product-card">
            <img src="https://coflex.com.tr/wp-content/uploads/2021/01/resim-yok.jpg"
                alt="Ürün 2">
            <div class="product-info">
                <h3>Ürün Adı: XXXX</h3>
                <p class="price">Fiyat: XXXX TL</p>
                <p>Ürün Açıklaması</p>
                <button class="ekle-btn">ÜRÜNÜ SİL</button>
            </div>
        </div>
        <div class="product-card">
            <img src="https://coflex.com.tr/wp-content/uploads/2021/01/resim-yok.jpg"
                alt="Ürün 3">
            <div class="product-info">
                <h3>Ürün Adı: XXXX</h3>
                <p class="price">Fiyat: XXXX TL</p>
                <p>Ürün Açıklaması</p>
                <button class="ekle-btn">ÜRÜNÜ SİL</button>
            </div>
        </div>
        <div class="product-card">
            <img src="https://coflex.com.tr/wp-content/uploads/2021/01/resim-yok.jpg"
                alt="Ürün 4">
            <div class="product-info">
                <h3>Ürün Adı: XXXX</h3>
                <p class="price">Fiyat: XXXX TL</p>
                <p>Ürün Açıklaması</p>
                <button class="ekle-btn">ÜRÜNÜ SİL</button>
            </div>
        </div>
    </div>

    <!-- Pagination kısmı -->
<div class="pagination" id="pagination">
    <a href="#" id="prev" onclick="changePage(currentPage - 1)">« Önceki</a>
    <a href="#" id="next" onclick="changePage(currentPage + 1)">Sonraki »</a>
</div>




    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <!-- Sol Sütun -->
            <div class="footer-column">
                <h3>Telefon Tamiri</h3>
                <ul>
                    <li><a href="myRequests.html">Taleplerim</a></li>
                    <li><a href="products.html">Aksesuar ve Ek Ürünler</a></li>
                    <li><a href="hakkımızda.html">Hakkımızda</a></li>
                    <li><a href="SSS.html">SSS</a></li>
                </ul>
            </div>
            <!-- Orta Sütun -->
            <div class="footer-column">
                <h3>İletişim</h3>
                <p>Adres:Çankaya/Ankara</p>
                <p>Email: <a href="mailto:destek@gmail.com">destek@gmail.com</a></p>
                <p>Telefon: <a href="tel:+905XXXXXXXXX">0 (XXX) XXX XX XX</a></p>
                <p>Çalışma Saatleri: 09:00 - 19:30</p>
            </div>
            <!-- Sağ Sütun -->
            <div class="footer-column">
                <h3>Sosyal Medya</h3>
                <a href="https://www.instagram.com/"><img src="https://cdn-icons-png.flaticon.com/256/717/717392.png"
                        alt="Instagram"></a>
                <a href="https://x.com/home"><img
                        src="https://logoeps.com/wp-content/uploads/2014/01/23931-twitter-logo-icon-vector-icon-vector-eps.png"
                        alt="Twitter"></a>
                <a href="https://www.whatsapp.com/"><img
                        src="https://logoeps.com/wp-content/uploads/2014/03/33447-whatsapp-logo-icon-vector-icon-vector-eps.png"
                        alt="WhatsApp"></a>
            </div>
        </div>
        <div class="footer-bottom">
            <p>© 2024 - Tüm Hakları Saklıdır. Telefon Tamiri</p>
        </div>
    </footer>

    <!-- Mesajlaşma Ikonu -->
    <div class="message-icon">
        <a href="https://dashboard.tawk.to/#/chat" target="_blank">
            <img src="/public/images/message.png" alt="Mesajlaşma İkonu">
        </a>
    </div>

    <!-- Ekleme Ikonu -->
    <div class="add-icon">
        <a href="addProduct.html">    <!--Ürün ekleme kısmına yönlendirilecek-->
            <img src="https://st2.depositphotos.com/1006689/10140/v/950/depositphotos_101406658-stock-illustration-plus-cross-sign-vector-icon.jpg" alt="Ekleme Ikonu">
        </a>
    </div>

    <script>
       let currentPage = 1;  // Başlangıç sayfası
        let totalPages = 1;   // Toplam sayfa sayısı

        function changePage(page) {
            if (page < 1 || page > totalPages) return;  // Geçersiz sayfalar için hiçbir şey yapma
            currentPage = page;
            fetchProducts();  // Sayfa değiştiğinde ürünleri al
            // Sayfa başına kaydır
            window.scrollTo({
                top: 0,
                behavior: 'smooth'  // Yumuşak kaydırma
            });
        }

        async function fetchProducts() {
            try {
                const response = await fetch(`http://localhost:3000/products?page=${currentPage}`);
                const data = await response.json();

                const products = data.products;
                totalPages = data.totalPages;  // Global toplam sayfa sayısını güncelle

                const productList = document.getElementById('product-list');
                productList.innerHTML = '';

                products.forEach(product => {
                    const productCard = `
                        <div class="product-card" id="product-${product._id}">
                            <img src="${product.photos[0] || 'https://coflex.com.tr/wp-content/uploads/2021/01/resim-yok.jpg'}" alt="${product.name}">
                            <div class="product-info">
                                <h3>Ürün Adı: ${product.name}</h3>
                                <p class="price">Fiyat: ${product.price} TL</p>
                                <p>${product.description}</p>
                                <button class="ekle-btn" onclick="deleteProduct('${product._id}')">ÜRÜNÜ SİL</button>
                            </div>
                        </div>
                    `;
                    productList.innerHTML += productCard;
                });

                renderPagination();  // Pagination elemanlarını oluştur
            } catch (error) {
                console.error('Error fetching products:', error);
            }
        }

        function renderPagination() {
        const paginationContainer = document.getElementById('pagination');
        paginationContainer.innerHTML = '';  // Önceki pagination'ı temizle

        // "Önceki" butonu
        if (currentPage > 1) {
            const prevButton = document.createElement('a');
            prevButton.textContent = 'Önceki';
            prevButton.href = '#';
            prevButton.addEventListener('click', (e) => {
                e.preventDefault();
                changePage(currentPage - 1);
            });
            paginationContainer.appendChild(prevButton);
        }

        // Sayfa numaraları
        for (let i = 1; i <= totalPages; i++) {
            const pageButton = document.createElement('a');
            pageButton.textContent = i;
            pageButton.href = '#';
            pageButton.className = i === currentPage ? 'active' : '';  // Aktif sayfayı vurgula
            pageButton.addEventListener('click', (e) => {
                e.preventDefault();
                changePage(i);
            });
            paginationContainer.appendChild(pageButton);
        }

        // "Sonraki" butonu
        if (currentPage < totalPages) {
            const nextButton = document.createElement('a');
            nextButton.textContent = 'Sonraki';
            nextButton.href = '#';
            nextButton.addEventListener('click', (e) => {
                e.preventDefault();
                changePage(currentPage + 1);
            });
            paginationContainer.appendChild(nextButton);
        }
    }

        // Sayfa ilk yüklendiğinde ürünleri getir
        fetchProducts();


        async function deleteProduct(productId) {
            try {
                const response = await fetch(`http://localhost:3000/products/${productId}`, {
                    method: 'DELETE',  // HTTP DELETE isteği gönderiyoruz
                });

                if (response.ok) {
                    alert("Ürün başarıyla silindi.");
                    // Ürünü sayfadan kaldır
                    document.getElementById(`product-${productId}`).remove();
                } else {
                    alert("Ürün silinirken bir hata oluştu.");
                }
            } catch (error) {
                console.error("Silme işlemi sırasında hata:", error);
                alert("Silme işlemi sırasında bir hata oluştu.");
            }
        }

    </script>
</body>

</html>